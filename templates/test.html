{% extends "layout.html" %}

{% block title %}
    Info
{% endblock %}

{% block main %}
    <h2>
        Info
    </h2>
    <br>
    <br>
    <table class="table table-striped-columns table-responsive">
        <tr id="links">
            {% for res in apiinput["d"] %}
            <td class="col-1" id="{{res["id"]}}" onClick="reply_click(this.id)"><img src = "{{ res["i"]["imageUrl"] }}" width = 100%></th>
            {% endfor %}
        <tr>
        <tr>    
            {% for res in apiinput["d"] %}
                <th class="col-1">{{ res["l"] }}</th>
            {% endfor %}
        </tr>
        <tr>
            {% for res in apiinput["d"] %}
                <td>{{ res["y"] }}</td>
                {% endfor %}
        </tr>
    </table>
    <div id = "info">
        <p>
            ertwerwwerwrwerwrewrewrewwre
            rewerer
            {{  cs["q"]  }}
        </p>
    </div>

    <script>
        function reply_click(clicked_id)
        {
            const e = clicked_id
            console.log(e)
            let data = new FormData()
            data.append("q",e)
            console.log(data)
            const request = new XMLHttpRequest()
            request.open("POST", "/search")
            request.send(data)
            //document.getElementById("links").submit()
            // window.location.href=("http://127.0.0.1:5000/info")
            // return false;
            /*             fetch("/info").then(function (response){
	            // The API call was successful!
	            return response.text();
            }).then(function (html) {
	            // This is the HTML from our response as a text string
	            console.log(html);
                }).catch(function (err) {
	            // There was an error
                console.warn('Something went wrong.', err);
            }); */
        }

        
    </script>



{% endblock %}